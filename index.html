<html>

<!--  
======================================================================================================
- 개인 홈페이지 코드  
- 유지보수 : Since 2024.09.29
======================================================================================================
-->
  
<!-- 
안쓰는 코드
<iframe width="560" height="315" src="https://www.youtube.com/embed/Cd3g8WZapSs" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<img src="/rurinadesico.gif" style="max-width: 100%; height: auto;"><br>  

<audio id="music" controls="" autoplay="" loop style="display:block;margin:auto; text-align: center">
   		<source src="/githubmu/zgundam1.mp3" type="audio/mp3"> </audio>
<script>
  var audio = document.getElementById("music");
  audio.volume = 0.2;
</script>
 
<a href="secret.html" TARGET="_blank">☆</a><br> 
-->  
  
 
<head>
<title> 전자 흑마법 연구실 </title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport">
  

 <!-- CSS -->
<style>
  body {background-color : black}
  div {color : white}
</style>


 <!-- 마우스 우클릭 금지 -->
<script type="text/javascript">
function keydowncheck()
{
var result = true;
var keycode = event.keyCode;
if(123 == keycode)  
{
result = false;
}
return result;
}

</script>



</head>

  
  
 <!-- 마우스 우클릭 금지2 -->  
<body LINK="WHITE" VLINK="WHITE" oncontextmenu='return false' onselectstart='return false' ondragstart='return false' onkeydown="return keydowncheck();">




<!-- header 영역 -->  
<header class=header>
 

 <!-- 제목과 헤드 -->
<div align="center">  
<h1><strong> 대문 페이지 </strong></h1>
<br>  
  <p> - Since 2021 - </p>
<br>
 

 <!-- 대문 이미지 -->
<img src="mainpic.jpg" style="max-width: 80%; height: auto;"><br>  
<br>  
<br>  


<!-- 음악 (비활성) 
<audio id="music" controls="" autoplay="true" loop style="display:block;margin:auto; text-align: center">
   		<source src="/music/nanpa2.mp3" type="audio/mp3"> </audio>
<script>
  var audio = document.getElementById("music");
  audio.volume = 0.2;
</script>
-->  
 

  
 <!-- 본문 -->
◀ 소개 ▶<br>   
<br> 
한 시대를 살아가는 게이머, 오덕후<br>
소신있게 살고싶은 한 아저씨의 개인공간.. <br>  
<br>  
<br>  
<br>  


</div>
</header>


 <!-- div영역 -->  
<nav class=nav>

<div align="center">

<a href="/homepage/index.html" target"_blank"> HomePage Go </a><br>
<br>
<br>
 
</div>

</nav>
  
  
  <!-- foot 영역 -->
  <footer class=footer>
  <div align="center">
  Copyright (c) leetaekyungdev All rights reserved.
  </div>
  </footer>


 
<!-- 배경음악 태그 -->
<audio id='bgm' muted="true" autoplay="true"></audio>
  
var myBgm = $('#bgm')[0];
var bgmSource = [
    {title: '테스트',
     src: '/music/nanpa2.mp3'} 
   ,{title: '테스트',
     src: '/music/isaku.mp3'}
];
var saveIndex = window.localStorage.getItem('current-bgm-index');
var currentIndex = saveIndex?Number(saveIndex):Math.floor(Math.random()*bgmSource.length);
var currentVolume = Number(window.localStorage.getItem('current-bgm-volume'))||0.1;
var bgmStart = false;
var bgmPlaying = false;


function saveBgmStatus() {
    if(Date.now() - Number(window.localStorage.getItem('visit-time')) < 1000*60*60 || window.localStorage.getItem('visit-time') == null) {
        window.localStorage.setItem('current-bgm-index', currentIndex);
        window.localStorage.setItem('current-bgm-time', myBgm.currentTime);			
    } else {
        window.localStorage.setItem('current-bgm-index', Math.floor(Math.random()*bgmSource.length));
        window.localStorage.setItem('current-bgm-time', '0');				
    }
    window.localStorage.setItem('visit-time', Date.now());
    window.localStorage.setItem('current-bgm-volume', currentVolume);
}


function getCurrentBgm() {
    $('#current-bgm').html(bgmSource[currentIndex].title);
    if(window.localStorage.getItem('current-bgm') == 'stop') {
        myBgm.pause();
        $('#bgm-status').html('켜기');
        $('.bgm-box').addClass('paused');
        bgmStart = false;
        bgmPlaying = false;
    } else {
        if(!bgmPlaying){
            myBgm.src = bgmSource[currentIndex].src;
            myBgm.muted = true;				
            var promise = myBgm.play();
            if (promise !== undefined) {
                promise.then(function(){
                    bgmStart = true;
                    bgmPlaying = true;
                    var saveBgmTime = (Number(window.localStorage.getItem('current-bgm-time'))||0.0)-0.3;
                    myBgm.currentTime = (saveBgmTime>0)?saveBgmTime:0.0;
                }).catch(function(error){
                    console.log(error);
                    bgmStart = false;
                    bgmPlaying = false;
                });
            }
        }

        $('.bgm-box').removeClass('paused');
        $('#bgm-status').html('끄기');
    }
}      


function nextBgm() {
    bgmPlaying = false;
    currentIndex = (currentIndex + 1)%bgmSource.length;
    window.localStorage.setItem('current-bgm-index', null);
    window.localStorage.setItem('current-bgm-time', null);
    getCurrentBgm();
    $('.bgm-btn').blur();
}


function toggleBgm() {
    if(window.localStorage.getItem('current-bgm') == 'stop') {
        window.localStorage.setItem('current-bgm', 'play');
    } else {
        saveBgmStatus();
        window.localStorage.setItem('current-bgm', 'stop');
    }
    getCurrentBgm();
    $('.bgm-btn').blur();
}


function browserCheck(){
    if(navigator.userAgent.toLowerCase().indexOf('chrome') > 0) {
        return true;
    } else {
        return false;
    }
}

if(!browserCheck()) {
    $('#bgm-switch').css('display', 'none');
}




function bgmVolume(type) {
    if(type == '+') {
        if(currentVolume > 1.0) {
            currentVolume = 1.0;
        } else {
            currentVolume += 0.1;
        }
    } else {
        if(currentVolume < 0.0) {
            currentVolume = 0.0;
        } else {
            currentVolume -= 0.1;
        }
    }
    if(browserCheck()) {
        myBgm.volume = currentVolume;
    } else {
        if(type == '+') {
            myBgm.muted = false;
            myBgm.play();
        } else {
            myBgm.muted = true;
            myBgm.pause();
        }
    }
    $('.bgm-btn').blur();
}


          
function bgmStartHandler(e) {
    if(!bgmStart) {
        bgmStart = true;
        getCurrentBgm();
    } else {
        if(bgmPlaying) {
            saveBgmStatus();
        }
    }
}

$(window).on('click', bgmStartHandler);
$(window).on('touchstart', bgmStartHandler);
$(window).on('touchend', bgmStartHandler);

$(window).on("beforeunload",function(e){saveBgmStatus();});	
$('#bgm').on('ended',function(e){nextBgm();});

$('#bgm').on('playing', function(e){
  myBgm.volume = currentVolume;
  myBgm.muted = false;
});          






          




      

 </body>
</html>
